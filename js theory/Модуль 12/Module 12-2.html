<!DOCTYPE html>
<!-- saved from url=(0061)http://fecore.net.ua/javascript/pages/theory/module-12-2.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Module 12</title><link rel="stylesheet" href="./Module 12-2_files/styles.min.css"><script async="" src="./Module 12-2_files/scripts.min.js.Без названия"></script></head><body class="theory-page"><div class="wrapper"><article><header><nav class="table-of-contents" id="main-nav"><ol class="page-nav" id="page-nav"><li><a href="http://fecore.net.ua/javascript/pages/theory/module-12-2.html#modules">Модульность приложения</a></li><li><a href="http://fecore.net.ua/javascript/pages/theory/module-12-2.html#iife">IIFE</a></li><li><a href="http://fecore.net.ua/javascript/pages/theory/module-12-2.html#template">Шаблон модуля</a></li></ol></nav></header><section><h2 id="modules">Модульность приложения</h2><p>Концепция модулей как способа организации JavaScript-кода существовала давно. Когда приложение сложное и кода много – мы пытаемся разбить его на файлы. В каждом файле описываем какую-то часть, а в дальнейшем – собираем эти части воедино.</p><p>Как глава книги, модули - это просто кластеры слов. Хорошие модули, очень автономны, с отличной функциональностью, что позволяет использовать их независимо друг от друга, удалять или добавлять по мере необходимости, не нарушая работу системы в целом.</p><p>Есть много преимуществ использования модулей при разрастающейся взаимозависимой кодовой базы. Модульный код помогает в организации, обслуживании, тестировании и, самое главное, управлении зависимостями. Наиболее важными являются поддерживаемость, пространство имен и повторное использование.</p><h3>Поддерживаемость</h3><p>По определению модуль является самодостаточным. Хорошо разработанный модуль призван максимально снизить зависимость от других частей кода. Это позволит изменять проект или расширять функционал приложения не опасаясь нарушить работу приложения. Обновление одного модуля намного проще, если модуль отделен от других фрагментов кода.</p><p>Возвращаясь к примеру с книгой, если вы хотите обновить главу в своей книге, было бы кошмаром, если бы небольшое изменение в одной главе требовало, чтобы вы также настраивали каждую другую главу. Вместо этого вы хотели бы написать каждую главу таким образом, чтобы улучшения можно было сделать не затрагивая другие главы.</p><h3>Пространство имен</h3><p>В JavaScript переменные, не входящие в область видимости функции, являются глобальными (это означает, что каждый может получить к ним доступ). Из-за этого обычно происходит «загрязнение пространства имен», где полностью несвязанный код разделяет глобальные переменные.</p><p>Как мы увидим позже, модули позволяют нам избежать загрязнения пространства имен, создавая личное пространство для наших переменных.</p><div class="note"><p>Обмен глобальными переменными между несвязанным кодом - это грубейшее нарушение лучших практик разработки.</p></div><h3>Повторное использование</h3><p>Все разработчики копировали ранее написаный код в новые проекты. Например, давайте представим, что вы скопировали метод из предыдущего проекта в ваш текущий проект. Если метод был связан с окружением - именами переменных или именами объектов, то вам придется переписать часть этого метода. Это, очевидно, огромная трата времени. Не было бы намного легче, если бы был модуль, который мы можем повторно использовать снова и снова без необходимости знать что-либо об окружении?</p></section><section><h2 id="iife">IIFE</h2><p><code>IIFE (Immediately Invoked Function Expression)</code> - анонимное самовызывающееся выражение. Это выражение, одновременно объявляет функцию и осуществляет ее вызов.</p><p>Обращение к такой безымянной функции в дальнейшем, ссылка на которую отсутствует, невозможно. Главным назначением такого выражения является создание отдельной области видимости, чтобы избежать засорения внешней (обычно глобальной).</p><p>Для начала рассмотрим синтаксис.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token punctuation">(</span><span class="token keyword keyword-function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// тело функции</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ES6 вариант</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// тело функции</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Так как <code>IIFE</code> создает свою область видимости, следующий пример вполне логичен.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-let">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword keyword-function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-let">let</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-let">let</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 10</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 20</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5</span>

<span class="token comment">// будет ошибка, y не объявлена в доступной области видимости</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught ReferenceError, y is not defined</span></code></pre><p>Присвоение <code>IIFE</code>в переменную запишет не саму функцию а результат ее выполнения, это часто используют для модульности кода, эту тему мы будем разбирать дальше в курсе.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> value <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> value <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span></code></pre><p>В <code>IIFE</code> можно также передавать аргументы.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-function">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> value <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-return">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 13</span></code></pre><p>Немедленно вызываемые функции позволяют создавать компоненты для различных сайтов, сводя риск совпадений имен переменных к минимуму. Например баннер, использующий JavaScript, может быть помещен на миллионы сайтов, а значит переменные баннера не должны совпасть ни с одним из миллионов приложений JavaScript и хранящихся там переменных. Если функция была анонимной, то после выполнения этой функции к ней невозможно обратиться и переменные внутри нее гарантировано изолированы.</p><h3>Точка с запятой перед IIFE</h3><p>В коде проекта вы можете встретить запись <code>IIFE</code> следующего вида.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// тело функции</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Все хорошо, точка с запятой тут не лишняя. Это стандартный прием для надежной работы модуля с другим кодом, очень часто чужим. В статье <a href="http://shuvalov.info/2014/08/18/function-asi/" target="_blank"><strong>ASI и мистические знаки перед IIFE в JavaScript</strong> </a>, рассказывается в каких случаях необходимо ставить точку с запятой перед <code>IIFE</code>.</p></section><section><h2 id="template">Шаблон модуля</h2><p>Шаблон модуля это частоиспользующийся паттерн. Он просто в понимании и реализации. В этой секции мы рассмотрим основные варианты реализации.</p><p>Шаблон модуля используется для имитации концепции классов, чтобы мы могли хранить как публичные, так и приватные методы и переменные внутри одного объекта - подобно тому, как классы используются в других языках программирования, таких как Java. Это позволяет нам создавать API, ориентированный на публичность, для методов, которые мы хотим открыть для использования, в то же время закрывая приватные переменные и методы в области замыкания.</p><h3>Anonymous closure</h3><p>Существует несколько способов записи шаблона модуля. В этом первом примере будем использовать анонимное замыкание. Это поможет нам достичь нашей цели, поместив весь наш код в анонимную функцию.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> globalVar <span class="token operator">=</span> <span class="token string">'I am a global variable!'</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword keyword-function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Переменные и методы внутри будут приватными</span>
  <span class="token keyword keyword-const">const</span> grades <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">82</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword keyword-const">const</span> <span class="token function-variable function">average</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> total <span class="token operator">=</span> grades<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> grade<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> grade<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token template-string"><span class="token string">`Аverage grade is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>total <span class="token operator">/</span> grades<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Average grade is 67</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>globalVar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// I am a global variable!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// average is not defined</span></code></pre><p>С помощью этой конструкции наша анонимная функция имеет собственное замыкание. Это позволяет нам скрыть переменные из родительского (глобального) пространства имен.</p><p>Что хорошо в этом подходе, так это то, что вы можете использовать локальные переменные внутри этой функции, случайно не перезаписывая существующие глобальные переменные, но все же обращаясь к глобальным переменным.</p><h3>Global import</h3><p>JavaScript имеет функцию, известную как подразумеваемые глобальные переменные. Всякий раз, когда используется имя, интерпретатор перемещает цепочку областей назад, ища оператор var для этого имени. Если ни один не найден, эта переменная считается глобальной. Если он используется в задании, глобальный создается, если он еще не существует. Это означает, что использование или создание глобальных переменных в анонимном закрытии легко. Вот пример:</p><p>Другой популярный подход, используемый библиотеками, такими как jQuery, - глобальный импорт. Это похоже на анонимное замыкание, которое мы только что видели, за исключением того, что мы передаем глобальные переменные как параметры. Это необходимо для того чтобы явно указать какие переменные у нас глобальные (те что передаем как аргументы в <code>IIFE</code>), делая код внутри модуля более понятным и менее зависимым от внешних факторов.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> globalVar <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword keyword-function">function</span> <span class="token punctuation">(</span>gv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Приватная функция, доступная только внутри замыкания</span>
  <span class="token keyword keyword-const">const</span> <span class="token function-variable function">privateFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Shhhh, this is private!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Откроем методы через интерфейс globalVariable,</span>
  <span class="token comment">// закрыв имплементацию внутри замыкания</span>
  gv<span class="token punctuation">.</span><span class="token function-variable function">greet</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">privateFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Hello, I am a global variable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>globalVar<span class="token punctuation">)</span><span class="token punctuation">;</span>

globalVar<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Shhhh, this is private!</span>
<span class="token comment">// Hello, I am a global variable</span>

<span class="token function">privateFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// privateFn is not defined</span></code></pre><p>В этом примере <code>globalVar</code> является единственной переменной, которая является глобальной. Преимущество такого подхода перед анонимным замыкание заключается в том, что вы объявляете глобальные переменные наперед, что делает код значительно более читабельным, так как имена использующихся переменных указаны явно.</p><h3>Object interface или Module export</h3><p>Еще один подход заключается в создании модулей с использованием автономного интерфейса объекта.</p><p>Иногда вы не просто хотите использовать глобальные переменные, но хотите их объявить. Мы можем легко сделать это, экспортируя их, используя возвращаемое значение анонимной функции. Это позволит создать шаблон модуля для использования вне анонимной функции.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> GRADES_MODULE <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Это будет приватная переменная внутри замыкания</span>
  <span class="token keyword keyword-const">const</span> grades <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">82</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword keyword-return">return</span> <span class="token punctuation">{</span>
    <span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword keyword-const">const</span> total <span class="token operator">=</span> grades<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> grade<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> grade<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword keyword-return">return</span> <span class="token template-string"><span class="token string">`Average grade is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>total <span class="token operator">/</span> grades<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>GRADES_MODULE<span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Average grade is 67.</span></code></pre><p>Обратите внимание, что мы объявили глобальный модуль с именем <code>GRADES_MODULE</code> с общедостум свойством: методом <code>GRADES_MODULE.average</code>. Кроме того, он поддерживает приватное внутреннее состояние, используя замыкание анонимной функции. Кроме того, мы можем легко импортировать необходимые глобальные переменные, используя шаблон, который мы узнали раньше.</p><p>Как вы можете видеть, этот подход позволяет нам решить, какие переменные и методы мы хотим сделать приватными и какие мы хотим открыть публично, помещая их в результат выполнения функции.</p><h3>Revealing module pattern</h3><p>Наверное один из наиболее частоиспользующихся паттернов. Он очень похож на вышеупомянутый подход <strong>Object interface</strong>, за исключением того, что гарантирует, что все методы и переменные остаются закрытыми до явного использования.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> calcGrades <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Переменные и методы внутри будут приватными</span>
  <span class="token keyword keyword-const">const</span> grades <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">82</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword keyword-const">const</span> <span class="token function-variable function">calcAverage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-const">const</span> total <span class="token operator">=</span> grades<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> grade<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> grade<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> <span class="token template-string"><span class="token string">`Average grade is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>total <span class="token operator">/</span> grades<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// явно укажем что мы хотим открыть и под какими именами</span>
  <span class="token keyword keyword-return">return</span> <span class="token punctuation">{</span>
    average<span class="token punctuation">:</span> calcAverage
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>calcGrades<span class="token punctuation">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Average grade is 67.</span></code></pre><ul><li><a href="https://coryrylan.com/blog/javascript-module-pattern-basics" target="_blank" rel="noopener">Revealing Module Pattern</a></li><li><a href="https://gist.github.com/0bie/aa52302f5e810c02f404ae73fc443c11" target="_blank" rel="noopener">ModulePatternES5.md</a></li></ul><h3>Заключение</h3><p>Рассмотренные подходы к написанию модулей имеют одну общую черту - использование одной глобальной переменной для закрытия кода в функции, тем самым создавая собственное пространство имен для себя с использованием замыкания.</p><p>Хотя каждый подход эффективен по-своему, у них есть недостатки:</p><ul><li>Разработчику нужно знать правильный порядок зависимостей для загрузки файлов. Управление зависимостями и правильное использование этих вещей могут быть головной болью.</li><li>Другим недостатком является то, что они все равно могут привести к конфликтам пространства имен. Например, что, если два из ваших модулей имеют одно и то же имя? Или что, если у вас есть две версии модуля, и вам нужны оба?</li></ul><p>Для более детального изучения классических, и не только, подходов к написанию модулей, ознакомьтесь с материалами по ссылкам:</p><ul><li><a href="http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html" target="_blank" rel="noopener">JavaScript Module Pattern: In-Depth</a></li><li><a href="https://medium.freecodecamp.org/javascript-modules-a-beginner-s-guide-783f7d7a5fcc" target="_blank">JavaScript Modules: A Beginner’s Guide</a></li><li><a href="https://goo.gl/Cg7nTb" target="_blank">Книга Адди Османи</a></li></ul></section></article><a href="http://fecore.net.ua/javascript/pages/theory/module-12-2.html#main-nav" class="to-page-nav"></a></div></body></html>