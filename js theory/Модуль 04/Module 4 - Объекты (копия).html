<!DOCTYPE html>
<!-- saved from url=(0061)http://fecore.net.ua/javascript/pages/theory/module-04-1.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Module 4</title><link rel="stylesheet" href="Module 4 - Объекты_files/styles.min.css"><script async="" src="Module 4 - Объекты_files/scripts.min.js.Без названия"></script></head><body class="theory-page"><div class="wrapper"><article><header><h1>Модуль 4 - Теория, часть 1</h1><nav class="table-of-contents" id="main-nav"><ol class="page-nav" id="page-nav"><li><a href="http://fecore.net.ua/javascript/pages/theory/module-04-1.html#one">Объект, как ассоциативный массив</a></li><li><a href="http://fecore.net.ua/javascript/pages/theory/module-04-1.html#obj-methods">Методы объекта</a></li><li><a href="http://fecore.net.ua/javascript/pages/theory/module-04-1.html#heap-and-stack">Присвоение по ссылке и по значению</a></li><li><a href="http://fecore.net.ua/javascript/pages/theory/module-04-1.html#obj-iteration">Перебор свойств и значений объекта</a></li><li><a href="http://fecore.net.ua/javascript/pages/theory/module-04-1.html#obj-assign">Слияние объектов</a></li><li><a href="http://fecore.net.ua/javascript/pages/theory/module-04-1.html#obj-destr">Деструктуризация обьектов</a></li><li><a href="http://fecore.net.ua/javascript/pages/theory/module-04-1.html#obj-coersion">Преобразование объектов</a></li></ol></nav></header><section><h2 id="one">Объект, как ассоциативный массив</h2><p>Программы могут содержать множество строк кода и над программами может работать множество людей на протяжении большого периода времени. Хорошая идея заключается в том, чтобы каждый программист мог работать над своей задачей, в то же время любой другой программист мог использовать результат работы другого программиста, не создавая помех общему делу.</p><p>Чтобы решить подобную архитектурную задачу было придумано <strong>ООП (объектно ориентированное программирование)</strong>. Как следует из названия в основе парадигмы ООП лежит объект.</p><p>С точки зрения языка программирования - <strong>объект</strong> это набор свойств и методов. С точки зрения разработчика программы - объект это абстракция, описывающая какие-то данные и функции для обработки именно этих данных.</p><p>Какие именно свойства (данные) и методы (функции обработки данных) должны быть в объекте - это вопрос решается каждый раз с учетом конкретной задачи.</p><p>Объекты позволяют создавать и удалять свойства во время выполнения программ, т.е. объекты в JS - <strong>динамические</strong>.</p><h3>Создание объекта</h3><p><strong>Объект</strong> - это ассоциативный массив, тип данных, хранящий <code>свойства (properties)</code> и <code>методы (methods)</code>.</p><p>Создание объекта через литерал похоже на создание массива через литерал, только используются фигурные <code>{}</code>, а не квадратные скобки.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>При создании объект может быть инициализирован свойствами, каждое из которых описывается парами <code>ключ: значение (key: value)</code>.</p><ul><li><strong>Ключ</strong> объекта это всегда <strong>строка (string)</strong>.</li><li><strong>Значением</strong> могут быть любые типы - примитивы, массивы, объекты.</li></ul><p>Правила именования ключей просты:</p><ul><li>если ключ заключен в кавычки, то это может быть произвольная строка текста.</li><li>Если кавычек нет, то вступают ограничения - текст без пробелов, начинающийся на букву из набора ASCII или символов ' <code>_</code>' и ' <code>$</code>'.</li></ul><p>Например в программе для туроператора понадобится объект, описывающий отель (название, уровень сервиса, вместимость и т.п).</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>Зарезервированные слова не могут быть ключами. Однако, если эти слова заключить в кавычки то они становятся обычной строкой. А строку можно использовать в качестве ключа.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  _key<span class="token punctuation">:</span> <span class="token string">'value'</span><span class="token punctuation">,</span>
  $key<span class="token punctuation">:</span> <span class="token string">'value'</span><span class="token punctuation">,</span>
  key<span class="token punctuation">:</span> <span class="token string">'value'</span><span class="token punctuation">,</span>
  <span class="token string">'0 is key'</span><span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
  <span class="token string">'number'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token string">'boolean'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string">'undefined'</span><span class="token punctuation">:</span> undefined<span class="token punctuation">,</span>
  <span class="token string">'null'</span><span class="token punctuation">:</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3>Обращение к свойствам объекта</h3><p>Обращение к свойству объекта, для того чтобы получить или присвоить ему значение, может быть записано 2-мя способами:</p><ul><li><code>object.key</code> - через точку.</li><li><code>object["key"]</code> - через квадратные скобки (как у массива) с именем ключа в кавычках.</li></ul><p>В место обращения будет возвращено значение свойства с таким ключом.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel<span class="token punctuation">.</span>name <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Resort Hotel</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Resort Hotel</span>

hotel<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Coastline Resort"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel<span class="token punctuation">.</span>name <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Coastline Resort</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Coastline Resort</span>

hotel<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Stardust Hotel"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel<span class="token punctuation">.</span>name <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Stardust Hotel</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Stardust Hotel</span></code></pre><p>Использование квадратных скобок позволяет упростить сравнение значений свойств объекта с какими-либо другими значениями:</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token function-variable function">canTakeGuests</span>  <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  hotel<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> amount <span class="token operator">?</span> <span class="token string">"Welcome!"</span> <span class="token punctuation">:</span> <span class="token string">"Sorry we are full!"</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">canTakeGuests</span><span class="token punctuation">(</span><span class="token string">"capacity"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Sorry we are full!</span></code></pre><p>Если при записи значения по ключу, такого ключа в объекте нет, он будет создан.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

hotel<span class="token punctuation">.</span>address <span class="token operator">=</span> <span class="token string">"1, Beach ave."</span><span class="token punctuation">;</span>
hotel<span class="token punctuation">[</span><span class="token string">"manager"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Chuck Norris"</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel<span class="token punctuation">.</span>address <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, Beach ave.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel<span class="token punctuation">.</span>manager <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Chuck Norris</span></code></pre><h3>Короткие свойства</h3><p>Зачастую у нас есть переменные, например, <code>name</code> и <code>stars</code>, и мы хотим использовать их в объекте. При объявлении объекта в этом случае достаточно указать только имя свойства, а значение будет взято из переменной с аналогичным именем.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-let">let</span> name <span class="token operator">=</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">;</span>
<span class="token keyword keyword-let">let</span> stars <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

<span class="token comment">// Эта запись избыточна</span>
<span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> stars<span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Вот так удобнее</span>
<span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">,</span>
  stars<span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hotel<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// {name: "Resort Hotel", stars: 5, capacity: 100}</span></code></pre><h3>Удаление свойств объекта</h3><p>С помощью оператора <code>delete</code> происходит удаление свойств объектов.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-delete">delete</span> hotel<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {stars: 5, capacity: 100}</span>

<span class="token keyword keyword-delete">delete</span> hotel<span class="token punctuation">[</span><span class="token string">"stars"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> hotel <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {capacity: 100}</span>
</code></pre><h3>Отсутствующие свойства</h3><p>Отсутствующее или удаленное свойство при обращении к нему по ключу возвращает <code>undefined</code>. Но и существующее свойство может иметь значение <code>undefined</code>. Поэтому для проверки наличия свойства у объекта используют оператор <code>in</code> и встроенный метод объекта <code>hasOwnProperty</code>.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-let">let</span> hasName <span class="token operator">=</span> <span class="token string">'name'</span> <span class="token keyword keyword-in">in</span> hotel<span class="token punctuation">;</span>
<span class="token keyword keyword-let">let</span> hasStars <span class="token operator">=</span> hotel<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'stars'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-let">let</span> hasPool <span class="token operator">=</span> <span class="token string">'pool'</span> <span class="token keyword keyword-in">in</span> hotel<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hasName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hasStars<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hasPool<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span></code></pre></section><section><h2 id="obj-methods">Методы объекта</h2><p>Если значением свойства выступает функция, то такая функция называется методом объекта.</p><p>Объявить метод можно с использованием синтаксиса ES5 или ES6 синтаксиса. Обе формы записи практически равноценны.</p><p>Внутри метода, если нам необходимо обратиться к свойству этого объекта, мы пока что будем использовать имя самого объекта. В дальнейшем мы узнаем о контексте и перейдем к нему, вместо указания имени объекта.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  getName<span class="token punctuation">:</span> <span class="token keyword keyword-function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> hotel<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getStars<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> hotel<span class="token punctuation">.</span>stars<span class="token punctuation">,</span>
  <span class="token function">changeCapacity</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    hotel<span class="token punctuation">.</span>capacity <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span> hotel<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Resort Hotel</span>
console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span> hotel<span class="token punctuation">.</span><span class="token function">getStars</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>

hotel<span class="token punctuation">.</span><span class="token function">changeCapacity</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span> hotel<span class="token punctuation">.</span>capacity <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200</span></code></pre></section><section><h2 id="heap-and-stack">Присвоение по ссылке и по значению</h2><p>Фундаментальным отличием объектов от примитивов, является их хранение и копирование «по ссылке». Обычные значения: строки, числа, булевы значения, null/undefined при присваивании переменных копируются целиком или, как говорят, «по значению» (by value).</p><p>С объектами – всё не так. В переменной, которой присвоен объект, хранится не сам объект, а «адрес его места в памяти», иными словами – «ссылка» на него (by reference).</p><p>Представим переменную в виде листа бумаги. Значение этой переменной мы представим в виде записи на этом листе.</p><img src="Module 4 - Объекты_files/paper.svg" alt="paper" width="200"><p>Если мы захотим сообщить содержимое этой записи пользователям то мы можем поступить так - переписать данные на новый лист и вручить этот лист каждому, тоесть сделать множественные независимые копии (присвоение по значению).</p><img src="Module 4 - Объекты_files/papers.svg" alt="papers" width="200"><p>Или поместить лист в закрытой комнате и дать пользователям ключ от этой комнаты, тоесть 1 экземпляр с общим доступом (присвоение по ссылке).</p><img src="Module 4 - Объекты_files/links.svg" alt="links" width="200"><p>Теперь мы изменим данные на листе бумаги. Очевидно, что посетители комнаты всегда будут видеть изменения которые мы вносим, так как мы изменяем оригинал и они имеют доступ к оригиналу. И также очевидно, что владельцы бумажных копий не заметят изменений глядя на свои копии.</p><img src="Module 4 - Объекты_files/compare.svg" alt="compare"><p>В JavaScript присвоение всех сложных типов данных (объектов, в т.ч. и массивов) происходит по ссылке (один общий экземпляр), а примитивы присваиваются по значению (много копий).</p><p>Передача по значению происходит в области памяти, называемой <code>Stack (стек)</code>. Таким переменным выделяется область в памяти и в эту область копируется данные. Аналогия с множественными копиями бумажного листа имеет вполне реальное воплощение, отдельный лист для каждой копии.</p><p>Передача по ссылке происходит благодаря механизму хранения данных в области памяти, называемой <code>Heap (куча)</code>. Вместо создания нового объекта, переменной присваивается ссылка на уже существующий объект. Таким образом несколько переменных могут указывать на один и тот же объект в памяти, по аналогии с закрытой комнатой, у них есть ключ доступа к оригиналу листа.</p><img src="Module 4 - Объекты_files/memory.svg" alt="reference-value-type-memory"><p>Все примитивные типы присваиваются по значению, то есть создается копия.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-let">let</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token comment">// Присвоение по значению, в памяти будет создана еще</span>
<span class="token comment">// одна ячейка в которую будет скопировано значение 5</span>
<span class="token keyword keyword-let">let</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>

<span class="token comment">// Изменим значение a</span>
a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
<span class="token comment">// Значение b не изменилось так как это отдельная копия</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span></code></pre><p>Все сложные типы, объекты, массивы, функции (это на самом деле все объекты) присваиваются по ссылке, то есть переменная просто получает ссылку на уже существующий объект.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"Mango"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// Присвоение по ссылке, так как a это объект,</span>
<span class="token comment">// в b записывается ссылка на уже существующий объект в памяти.</span>
<span class="token comment">// Теперь a и b указывают на один и тот же объект.</span>
<span class="token keyword keyword-const">const</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: "Mango"}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: "Mango"}</span>

<span class="token comment">// Изменим поле name, используя указатель из a</span>
a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Poly"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: "Poly"}</span>
<span class="token comment">// b изменилось тоже, потому что b, как и a,</span>
<span class="token comment">// просто содержат ссылку на один и тот же объект</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: "Poly"}</span>

<span class="token comment">// Результат повторяется</span>
b<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Ajax"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: "Ajax"}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: "Ajax"}</span></code></pre><p>Если на объект в <code>Heap</code> перестали ссылаться, т.е. количество ссылок равно нулю, то такой объект будет удален из <code>Heap</code>. <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Memory_Management" target="_blank">Здесь </a>подробнее о механизмах работы и очистки памяти.</p></section><section><h2 id="obj-iteration">Перебор свойств и значений объекта</h2><p>По умолчанию объект не является итерируемым, то есть по нему нельзя пройти циклом <code>for</code> как по массиву или строке. Для того чтобы перебрать объект существует несколько методов.</p><h3>Цикл for...in</h3><p>Для перебора ключей или значений объекта используют цикл <code>for...in</code>.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span>key <span class="token keyword keyword-in">in</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// statement</span>
<span class="token punctuation">}</span></code></pre><ul><li>Перебирает ключи объекта.</li><li>Можно удалять свойства во время перебора.</li><li>Нельзя использовать для перебора массивов.</li></ul><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Перебор ключей key объекта hotel</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> key <span class="token keyword keyword-in">in</span> hotel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Key: '</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Key: name</span>
<span class="token comment">// Key: stars</span>
<span class="token comment">// Key: capacity</span></code></pre><p>Для того чтобы получить значение свойства с таким ключом во время итерации, используйте синтаксис квадратных скобок.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Перебор ключей key объекта hotel</span>
<span class="token comment">// Ключ всегда строка, поэтому можно получить</span>
<span class="token comment">// значение свойства по ключу</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> key <span class="token keyword keyword-in">in</span> hotel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Value: '</span><span class="token punctuation">,</span> hotel<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Value: "Resort Hotel"</span>
<span class="token comment">// Value: 5</span>
<span class="token comment">// Value: 100</span></code></pre><h4>Нюанс for...in</h4><p>Кроме копирования и передачи по ссылке объекты можно наследовать. Объекты связанные отношениями <code>paren-child (родитель-ребенок)</code> ведут себя подобно вложенным элементам HTML и наследуемым свойствами CSS.</p><p>Например если общему предку задать размер шрифта, то потомки получат этот размер. Но любой потомок может переопределить этот размер для себя (и заодно для своих потомков). Мы рассмотрим наследование в Javascript подробнее несколько позже. А сейчас, нам важно научиться уметь перебирать собственные свойства объекта, без учета свойств его предков.</p><p>Проблема цикла <code>for...in</code> заключается в том, что он перебирает также унаследованные свойства. На данный момент важно усвоить что при использовании цикла <code>for...in</code>, необходимо так же проверять что перебираемое свойство принадлежит именно текущему объекту.</p><p>Для этого существует специальный метод <code>hasOwnProperty</code>. Этот метод возвращает <code>true</code> если свойство принадлежит данному объекту и <code>false</code> если метод принадлежит какому-либо из предков этого объекта.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Все что необходимо добавить, это проверку</span>
<span class="token comment">// на пренадлежность свойства с текущим ключом.</span>
<span class="token comment">// Если if выполняется то работаем со свойством.</span>
<span class="token comment">// Если if не выполняется, значит свойство с таким ключом</span>
<span class="token comment">// унаследовано и нам не интересно.</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> key <span class="token keyword keyword-in">in</span> hotel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>hotel<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Value: '</span><span class="token punctuation">,</span> hotel<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Value: "Resort Hotel"</span>
<span class="token comment">// Value: 5</span>
<span class="token comment">// Value: 100</span></code></pre><h3>keys, values, entries</h3><p>Все объекты происходят от конструктора <code>Object</code>. У него есть несколько очень полезных методов для работы с объектами.</p><table><tbody><tr><th>Синтаксис</th><th>Описание</th></tr><tr><td><code>Object.keys(obj)</code></td><td>Вернет массив, с ключами объекта в виде строк.</td></tr><tr><td><code>Object.values(obj)</code></td><td>Вернет массив, со значениями свойств объекта.</td></tr><tr><td><code>Object.entries(obj)</code></td><td>Вернет массив, каждым элементом которого будет еще один массив из 2-х элементов, ключа и значения этого ключа.</td></tr></tbody></table><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>hotel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//["name", "stars", "capacity"]</span>
<span class="token keyword keyword-const">const</span> values <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>hotel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//["Resort Hotel", 5, 100]</span>
<span class="token keyword keyword-const">const</span> entries <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>hotel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[Array(2), Array(2), Array(2)]</span></code></pre><p>Скомбинировав результат <code>Object.keys</code> и цикл <code>for</code> мы можем "перебрать" объект. На самом деле мы перебираем массив ключей, а потом просто обращаемся к свойству объекта с таким ключом.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>hotel<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//["name", "stars", "capacity"]</span>

<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-let">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> key <span class="token operator">=</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'Value: '</span><span class="token punctuation">,</span> hotel<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Value: Resort Hotel</span>
<span class="token comment">// Value: 5</span>
<span class="token comment">// Value: 100</span></code></pre><p>А еще удобнее использовать результат <code>Object.entries</code> который вернет массив массивов с ключами и значениями свойств объекта.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Посмотрите в консоли из каких двух элементов</span>
<span class="token comment">// состоит каждый подмассив. Первый элемент это ключ свойства,</span>
<span class="token comment">// второй это значение.</span>
<span class="token keyword keyword-const">const</span> entries <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>hotel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//[Array(2), Array(2), Array(2)]</span>

<span class="token comment">// Используем деструктуризацию массива</span>
<span class="token comment">// и на каждой итерации по entries выберем</span>
<span class="token comment">// первый элемент подмассива (ключ) в переменную key,</span>
<span class="token comment">// а второй (значение) в переменную value</span>
<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-let">let</span> <span class="token punctuation">[</span> key<span class="token punctuation">,</span> value <span class="token punctuation">]</span> <span class="token keyword keyword-of">of</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// name: Resort Hotel</span>
<span class="token comment">// stars: 5</span>
<span class="token comment">// capacity: 100</span></code></pre><h3>for...in vs Object.keys</h3><p>Цикл <code>for in</code> в сочетании с методом <code>hasOwnProperty</code> и метод <code>Object.keys</code> вернут одинаковые массивы собственных ключей объекта. Отличие между этими способами в том, что <code>hasOwnProperty</code> может использоваться для поиска одного ключа ( <code>break</code> прервет выполнение цикла). А метод <code>Object.keys</code> нельзя прервать, кроме того поиск нужного ключа потребует дополнительных вычислений.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> keyToFind <span class="token operator">=</span> <span class="token string">"stars"</span><span class="token punctuation">;</span>

<span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> key <span class="token keyword keyword-in">in</span> hotel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword keyword-const">const</span> isOwnKey <span class="token operator">=</span> hotel<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token keyword keyword-const">const</span> isMatch <span class="token operator">=</span> key <span class="token operator">===</span> keyToFind<span class="token punctuation">;</span>

  <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span> isOwnKey <span class="token operator">&amp;&amp;</span> isMatch <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Found </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> key!`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-break">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token comment">// Found stars key</span></code></pre></section><section><h2 id="obj-assign">Слияние объектов</h2><p>Довольно часто необходимо решить задачу по составлению нового объекта как результат слияния нескольких объектов, или обновлению объекта полями других объектов.</p><p>Такую задачу решает метод <code>Object.assign(target, ...sources)</code>, который получает список объектов <code>sources</code> и копирует в первый <code>target</code> все собственные (не унаследованные) свойства из остальных. При этом последующие свойства перезаписывают предыдущие. Объект <code>target</code> так же возвращается как результат выполнения метода.</p><p>Имеющиеся свойства в целевом объекте будут перезаписаны, а отсутствующие - созданы. При наличии одинаковых ключей в нескольких источниках одновременно, значение ключа будет взято из того источника, котороый указан позже. То есть приоритет источников растет слева направо.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> first <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Tony'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> last <span class="token operator">=</span> <span class="token punctuation">{</span>lastName<span class="token punctuation">:</span> <span class="token string">'Stark'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> person <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>first<span class="token punctuation">,</span> last<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: 'Tony', lastName: 'Stark'}</span>

<span class="token comment">// target (first) тоже изменился</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// first = {name: 'Tony', lastName: 'Stark'}</span></code></pre><p>Сольем множественные источники</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> a <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>bar<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>baz<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {foo: 0, bar: 1, baz: 2}</span></code></pre><p>Сольем множественные источники с перезаписью значений одинаковых ключей.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> a <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// {foo: 2}</span></code></pre><p>Можно сделать не глубокий клон объекта, передав для <code>target</code> пустой объект.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>person<span class="token punctuation">:</span> <span class="token string">'Thor Odinson'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> clone <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {person: 'Thor Odinson'}</span></code></pre><p>Где это можно применять? Представьте что у вас есть объект пользовательских настроек. Когда пользователь меняет настройки, создается новый объект настроек, как нам обновить исходный объект используя новый? - явно не перебирать их свойство за свойством и сравнивать что изменилось.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> defaultSettings <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"Mango"</span><span class="token punctuation">,</span>
  age<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  status<span class="token punctuation">:</span> <span class="token string">"happy"</span><span class="token punctuation">,</span>
  isActive<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  isAdmin<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> updatedSettings <span class="token operator">=</span> <span class="token punctuation">{</span>
  age<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  status<span class="token punctuation">:</span> <span class="token string">"cheerful"</span><span class="token punctuation">,</span>
  isActive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>defaultSettings<span class="token punctuation">,</span> updatedSettings<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>defaultSettings<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// {</span>
<span class="token comment">//  name: "Mango",</span>
<span class="token comment">//  age: 3,</span>
<span class="token comment">//  status: "cheerful",</span>
<span class="token comment">//  isActive: true,</span>
<span class="token comment">//  isAdmin: false</span>
<span class="token comment">// }</span></code></pre><p>Для более глубокого знакомства с <code>Object.assign</code>, пройдите <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank"><strong>этот материал</strong> </a>.</p><h3>Оператор spread</h3><p>В ES6 появился оператор <code>... (spread)</code>, аналог <code>Object.assign</code>. Визуально он похож на оператор <code>rest</code>, но в отличии от <code>rest</code>, который собирает отдельные элементы в коллекцию, оператор <code>spread</code> наоборот распыляет коллекцию.</p><p>В большинстве случаев, оператор <code>spread</code>, используется в ситуации когда задачу можно решить используя <code>Object.assing({}, a, b...)</code>, то есть когда необходимо создать новый объект по результату слияния нескольких других объектов.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-const">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> c <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {x: 0, y: 2, z: 3}</span>

<span class="token comment">// То же самое используя оператор ...</span>
<span class="token keyword keyword-const">const</span> c <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>a<span class="token punctuation">,</span>
  <span class="token operator">...</span>b
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {x: 0, y: 2, z: 3}</span></code></pre><p>Детальнее ознакомиться с оператором <code>spread</code> вы можете <a href="https://davidwalsh.name/spread-operator" target="_blank"><strong>в этой статье</strong> </a>.</p></section><section><h2 id="obj-destr">Деструктуризация обьектов</h2><p>При разработке программ данные на сайт приходят как правило в виде объектов. А логика обработки данных написана с помощью локальных переменных. Поэтому необходимо присваивать значения свойств объектов переменным и делать это желательно максимально просто.</p><p>Для этого в ES6 введен новый синтаксис - переменным внутри фигурных скобок присваиваются значения объекта. Если имя переменной и ключ объекта совпадают, то происходит присваивание. Если для переменной не нашлось подходящего ключа то будет присвоен <code>undefined</code>.</p><p>Присвоения <code>undefined</code> можно избежать, задав переменным значения по умолчанию. Не всегда удобно создавать имена переменных по ключам, поэтому есть возможность переопределить имена в процессе присвоения.</p><div class="note"><p>Поскольку присваивание по ссылке не создает независимых копий, то необходимо создать новый массив или объект и затем делать копии всех значений (и ключей для объектов).</p></div><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Объявим переменные и присвоим им значения из объекта</span>
<span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> stars<span class="token punctuation">,</span> status <span class="token punctuation">}</span> <span class="token operator">=</span> hotel<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> stars<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Resort Hotel", 5, undefined</span></code></pre><p>Переменным можно задавать значения по умолчанию, в случае если такого свойства в объекте нет.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">"hotel"</span><span class="token punctuation">,</span> stars <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> status <span class="token operator">=</span> <span class="token string">"empty"</span> <span class="token punctuation">}</span> <span class="token operator">=</span> hotel<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> stars<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Resort Hotel", 5, "empty"</span></code></pre><p>Также можно переопределить имя перменной для деструктуризации. Сначала пишем имя свойства из которого мы хотим получить значение, после чего ставим двоеточие и пишем имя переменной в которую мы хотим поместить значение этого свойства.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> hotelName<span class="token punctuation">,</span>
  stars<span class="token punctuation">,</span>
  status<span class="token punctuation">:</span> hotelStatus
<span class="token punctuation">}</span> <span class="token operator">=</span> hotel<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hotelName<span class="token punctuation">,</span> stars<span class="token punctuation">,</span> hotelStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// "Resort Hotel", 5, "empty"</span></code></pre><p>Используя опертор <code>... (rest)</code> можно делать частичную деструктуризацию, взяв из объекта необходимые поля, а остальное собрать в переменную под именем <code>rest</code>(имя переменной любое), это будет объект с теми полями, которые мы явно не деструктуризировали в переменные.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> hotel <span class="token operator">=</span> <span class="token punctuation">{</span>
  name <span class="token punctuation">:</span> <span class="token string">"Resort Hotel"</span><span class="token punctuation">,</span>
  stars<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
  capacity<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-const">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">}</span> <span class="token operator">=</span> hotel<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "Resort Hotel"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {stars: 5, capacity: 100}</span></code></pre></section><section><h2 id="obj-coersion">Преобразование объектов</h2><p>Бывают операции, при которых объект должен быть преобразован в примитив.</p><ul><li>Строковое преобразование – если объект выводится через <code>alert(obj)</code>.</li><li>Численное преобразование – при арифметических операциях, сравнении с примитивом.</li><li>Логическое преобразование – при <code>if(obj)</code> и других логических операциях.</li></ul><h3>Логическое</h3><p>Проще всего – с логическим преобразованием. Любой объект в логическом контексте – <code>true</code>, даже если это пустой массив <code>[]</code> или объект <code>{}</code>.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-if">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Условие if выполнилось'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><h3>Строковое</h3><p>Строковое преобразование проще всего увидеть, если вывести объект при помощи <code>alert</code>.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> guest <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Mango'</span><span class="token punctuation">,</span> room<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>guest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Object]</span></code></pre><p>Как видно, содержимое объекта не вывелось. Это потому, что стандартным строковым представлением пользовательского объекта является строка <code>"[object Object]"</code>. Такой вывод объекта не содержит интересной информации. Поэтому имеет смысл его поменять на что-то более полезное.</p><p>Если в объекте присутствует метод <code>toString</code>, который возвращает примитив, то он используется для преобразования. Метод toString не обязан возвращать именно строку. Его результат может быть любого примитивного типа. Все объекты, включая встроенные, имеют свои реализации метода <code>toString</code>.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> guest <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Mango'</span><span class="token punctuation">,</span>
  room<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token template-string"><span class="token string">`name: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, room: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>room<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>guest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name: Mango, room: 20</span></code></pre><h3>Численное</h3><p>Для численного преобразования объекта используется метод <code>valueOf</code>, а если его нет – то <code>toString</code></p><p>Метод <code>valueOf</code> обязан возвращать примитивное значение, иначе его результат будет проигнорирован. При этом – не обязательно числовое. У большинства встроенных объектов такого <code>valueOf</code> нет, поэтому численное и строковое преобразования для них работают одинаково.</p><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword keyword-const">const</span> guest <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Mango'</span><span class="token punctuation">,</span>
  room<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-this">this</span><span class="token punctuation">.</span>room<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-return">return</span> <span class="token number">20</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token operator">+</span>guest <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 20, вызвался valueOf</span>

<span class="token keyword keyword-delete">delete</span> guest<span class="token punctuation">.</span>valueOf<span class="token punctuation">;</span> <span class="token comment">// valueOf удалён</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token operator">+</span>guest <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 20, вызвался toString</span></code></pre><h3>Дополнительные материалы</h3><p>По ссылкам ниже вы найдете полный алгоритм приведения типов описанный в спецификации языка.</p><ul><li><a href="http://es5.github.io/x11.html#x11.8.5" target="_blank">The Abstract Relational Comparison Algorithm</a></li><li><a href="http://es5.github.io/x11.html#x11.9.3" target="_blank">The Abstract Equality Comparison Algorithm</a></li></ul></section></article><a href="http://fecore.net.ua/javascript/pages/theory/module-04-1.html#main-nav" class="to-page-nav"></a></div></body></html>